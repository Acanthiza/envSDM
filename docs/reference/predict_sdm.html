<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Predict from SDM — predict_sdm • envSDM</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predict from SDM — predict_sdm"><meta name="description" content="When running predict_sdm, the first predict, saved as 'full.tif' is always to
the full extent of the environmental variables even when they extend beyond
the predict boundary (this ensures all result can be stacked). The second
predict, saved as 'mask.tif' is masked to the same boundary as provided: to
the pred_limit argument of prep_sdm; or generated in prep_sdm from the
pred_limit, limit_buffer and pred_clip arguments. A threshold raster
can also be saved (saved as 'thresh.tif') - see apply_thresh argument."><meta property="og:description" content="When running predict_sdm, the first predict, saved as 'full.tif' is always to
the full extent of the environmental variables even when they extend beyond
the predict boundary (this ensures all result can be stacked). The second
predict, saved as 'mask.tif' is masked to the same boundary as provided: to
the pred_limit argument of prep_sdm; or generated in prep_sdm from the
pred_limit, limit_buffer and pred_clip arguments. A threshold raster
can also be saved (saved as 'thresh.tif') - see apply_thresh argument."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">envSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/acanthiza/envSDM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Predict from SDM</h1>
      <small class="dont-index">Source: <a href="https://github.com/acanthiza/envSDM/blob/HEAD/R/predict_sdm.R" class="external-link"><code>R/predict_sdm.R</code></a></small>
      <div class="d-none name"><code>predict_sdm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>When running predict_sdm, the first predict, saved as 'full.tif' is always to
the full extent of the environmental variables even when they extend beyond
the predict boundary (this ensures all result can be stacked). The second
predict, saved as 'mask.tif' is masked to the same boundary as provided: to
the <code>pred_limit</code> argument of prep_sdm; or generated in prep_sdm from the
<code>pred_limit</code>, <code>limit_buffer</code> and <code>pred_clip</code> arguments. A threshold raster
can also be saved (saved as 'thresh.tif') - see <code>apply_thresh</code> argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predict_sdm</span><span class="op">(</span></span>
<span>  <span class="va">prep</span>,</span>
<span>  <span class="va">full_run</span>,</span>
<span>  <span class="va">out_dir</span>,</span>
<span>  predictors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  is_env_pred <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  terra_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  doClamp <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  limit_to_boundary <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  apply_thresh <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  force_new <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  do_gc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_tifs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-prep">prep<a class="anchor" aria-label="anchor" href="#arg-prep"></a></dt>
<dd><p>Character or named list. If character, the path to an existing
<code>prep.rds</code>. Otherwise, the result of a call to <code><a href="prep_sdm.html">prep_sdm()</a></code> with return_val =
"object".</p></dd>


<dt id="arg-full-run">full_run<a class="anchor" aria-label="anchor" href="#arg-full-run"></a></dt>
<dd><p>Character or named list. If character, the path to an
existing <code>full_run.rds</code>. Otherwise, the result of a call to <code>run_full_sdm</code>()
with return_val = "object".</p></dd>


<dt id="arg-out-dir">out_dir<a class="anchor" aria-label="anchor" href="#arg-out-dir"></a></dt>
<dd><p>Character. Name of directory into which <code>.tif</code>s will be saved.
Will be created if it does not exist.</p></dd>


<dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>Character. Vector of paths to predictor <code>.tif</code> files.</p></dd>


<dt id="arg-is-env-pred">is_env_pred<a class="anchor" aria-label="anchor" href="#arg-is-env-pred"></a></dt>
<dd><p>Logical. Does the naming of the directory and files in
<code>predictors</code> follow the pattern required by <code>envRaster::parse_env_tif()</code>?</p></dd>


<dt id="arg-terra-options">terra_options<a class="anchor" aria-label="anchor" href="#arg-terra-options"></a></dt>
<dd><p>Passed to <code><a href="https://rspatial.github.io/terra/reference/terraOptions.html" class="external-link">terra::terraOptions()</a></code>. e.g. list(memfrac =
0.6)</p></dd>


<dt id="arg-doclamp">doClamp<a class="anchor" aria-label="anchor" href="#arg-doclamp"></a></dt>
<dd><p>Passed to <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">terra::predict()</a></code> (which then passes as <code>...</code> to
<code>fun</code>). Possibly orphaned from older envSDM?</p></dd>


<dt id="arg-limit-to-boundary">limit_to_boundary<a class="anchor" aria-label="anchor" href="#arg-limit-to-boundary"></a></dt>
<dd><p>Logical. If <code>predict_boundary</code> exists within <code>prep</code>
and <code>limit_to_boundary == TRUE</code>, an output raster (<code>mask.tif</code>) will be
created within <code>predict_boundary</code> using <code><a href="https://rspatial.github.io/terra/reference/mask.html" class="external-link">terra::mask()</a></code>. Irrespective of
<code>limit_to_boundary</code>, <code>full.tif</code> is always created at the full extent of the
predictors. Thus all <code>mask.tif</code> files can be 'stacked' as they have the same
extent. If needed, limiting the predictions for a taxa to its predict
boundary can then be done via <code>terra::trim(mask.tif)</code>.</p></dd>


<dt id="arg-apply-thresh">apply_thresh<a class="anchor" aria-label="anchor" href="#arg-apply-thresh"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, an output raster <code>thresh.tif</code> will be
created using the maximum of specificity + sensitivity. The threshold value
can be accessed within <code>tune.rds</code> as, say, <code>mod &lt;- rio::import("tune.rds")</code>
and then <code>mod$e[[1]]@thresholds$max_spec_sens</code></p></dd>


<dt id="arg-force-new">force_new<a class="anchor" aria-label="anchor" href="#arg-force-new"></a></dt>
<dd><p>Logical. If output files already exist, should they be
remade?</p></dd>


<dt id="arg-do-gc">do_gc<a class="anchor" aria-label="anchor" href="#arg-do-gc"></a></dt>
<dd><p>Logical. Run <code>base::rm(list = ls)</code> and <code><a href="https://rdrr.io/r/base/gc.html" class="external-link">base::gc()</a></code> at end of
function? Useful to keep RAM use down when running SDMs for many, many taxa,
especially if done in parallel.</p></dd>


<dt id="arg-check-tifs">check_tifs<a class="anchor" aria-label="anchor" href="#arg-check-tifs"></a></dt>
<dd><p>Logical. Check if any output <code>.tif</code> files error on
<code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> and delete them if they do. Useful after a crash during
predict.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Passed to <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">terra::predict()</a></code>. e.g. use for wopt = list(). Also
used when masking the full raster back to the mcp (e.g. also passed to
<code><a href="https://rspatial.github.io/terra/reference/mask.html" class="external-link">terra::mask()</a></code>)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Named list of created .tif files. Names follow the 'full', 'mask'
and 'thresh' naming. Output .tif(s), .log, and optional .png, written to
<code>out_dir</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>

    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stuart Brown, Nigel Willoughby, Joel Allan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

