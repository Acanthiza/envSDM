<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Prepare for running an SDM — prep_sdm • envSDM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare for running an SDM — prep_sdm"><meta property="og:description" content="Prepare for running an SDM"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">envSDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/acanthiza/envSDM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare for running an SDM</h1>
    <small class="dont-index">Source: <a href="https://github.com/acanthiza/envSDM/blob/HEAD/R/prep_sdm.R" class="external-link"><code>R/prep_sdm.R</code></a></small>
    <div class="hidden name"><code>prep_sdm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Prepare for running an SDM</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prep_sdm</span><span class="op">(</span></span>
<span>  this_taxa <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">out_dir</span>,</span>
<span>  <span class="va">presence</span>,</span>
<span>  pred_limit <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  limit_buffer <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  pred_clip <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">predictors</span>,</span>
<span>  cat_preds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  num_bg <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  prop_abs <span class="op">=</span> <span class="st">"abs"</span>,</span>
<span>  use_ecdf <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  many_p_prop <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  folds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  spatial_folds <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  min_fold_n <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  min_dens <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  use_cuts <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  dens_res <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  max_samp_iter <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  low_boost <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  save_pngs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_corr <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  corr_thresh <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  do_gc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force_new <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>this_taxa</dt>
<dd><p>Character. Name of taxa. Used to name outputs. If `NULL`,
this will be `basename(dirname(out_dir))`.</p></dd>


<dt>out_dir</dt>
<dd><p>Character. Name of directory into which results will be saved.</p></dd>


<dt>presence</dt>
<dd><p>Dataframe of presences. Needs columns called `lat` (latitude)
and `long` (longitude) both in decimal degrees.</p></dd>


<dt>pred_limit</dt>
<dd><p>Logical. area of interest limits (i.e. MCP around points).
Can be `TRUE` (use points to generate a minimum convex polygon to use as a
limit), `FALSE` (do not limit) or path to existing sf to use.</p></dd>


<dt>limit_buffer</dt>
<dd><p>Numeric. Apply this buffer to `pred_limit` (in metres).</p></dd>


<dt>pred_clip</dt>
<dd><p>sf. Optional sf to clip the pred_limit back to (e.g. to
prevent prediction into ocean)</p></dd>


<dt>predictors</dt>
<dd><p>Character. Vector of paths to predictor `.tif` files.
`envRaster::name_env_tif()` is used internally to parse so should follow that
naming convention. :( (might work otherwise, but seems unlikely).</p></dd>


<dt>cat_preds</dt>
<dd><p>Character. Vector of predictor names that are character.</p></dd>


<dt>num_bg</dt>
<dd><p>Numeric. How many background points?</p></dd>


<dt>prop_abs</dt>
<dd><p>Character. Is `num_bg` a proportion (`prop`) of the number of
records in `presence` or an absolute (`abs`) number?</p></dd>


<dt>use_ecdf</dt>
<dd><p>Logical. If `TRUE` the density raster is converted via
`ras_ecdf &lt;- ecdf(values(target_density)), target_density &lt;- terra::app(target_density, fun = \(i) ras_ecdf(i))`.
Creates wider density bands.</p></dd>


<dt>many_p_prop</dt>
<dd><p>Numeric. Ensure the number of background points is at
least `many_p_prop * number of presences`. e.g. If there are more than 5000
presences and num_bg is set at `10000` and `many_p_prop` is `2`, then num_bg
will be increased to `many_p_prop * nrow(presences)`</p></dd>


<dt>folds</dt>
<dd><p>Numeric. How many folds to use in cross validation? Will be
adjusted downwards if number of presences do not support `folds * min_fold_n`</p></dd>


<dt>spatial_folds</dt>
<dd><p>Logical. Use spatial folds? Even if `TRUE`, can resort
to non-spatial cv if presences per fold do not meet `min_fold_n` or there are
not enough presences to support more than one fold.</p></dd>


<dt>min_fold_n</dt>
<dd><p>Numeric. Sets both minimum number of presences, and,
by default, the minimum number of presences required for a model.</p></dd>


<dt>min_dens</dt>
<dd><p>Numeric. Usually a little above 0. Sets the minimum density
for background points. If zero, large areas of no background points can cause
trouble with model predictions into these areas.</p></dd>


<dt>use_cuts</dt>
<dd><p>Numeric. Used to set number of thresholds in `samp_df`. See
`envSDM::density_sample()`.</p></dd>


<dt>dens_res</dt>
<dd><p>Numeric. Resolution (in metres) of density raster.</p></dd>


<dt>max_samp_iter</dt>
<dd><p>Numeric. Passed to max_sample argument of
`envSDM::density_sample()`.</p></dd>


<dt>low_boost</dt>
<dd><p>Numeric. Divisor for the lowest density cf the 2nd lowest
density. If the lowest density falls below this value, extra background
points are added. Helps to stop predicting high probabilities into areas with
very few background points.</p></dd>


<dt>save_pngs</dt>
<dd><p>Logical. Save out a .png of the density raster and spatial
blocks</p></dd>


<dt>remove_corr</dt>
<dd><p>Logical. If TRUE, predictors with high correlation
_at presences_ are removed.</p></dd>


<dt>corr_thresh</dt>
<dd><p>Numeric. Definition of 'high' correlation for `remove_corr`</p></dd>


<dt>do_gc</dt>
<dd><p>Logical. Run `base::rm(list = ls)` and `base::gc()` at end of
function? Useful when running SDMs for many, many taxa, especially if done in
parallel.</p></dd>


<dt>force_new</dt>
<dd><p>Logical. If outputs already exist, should they be remade?</p></dd>


<dt>pres_crs</dt>
<dd><p>Anything that will return a legitimate crs when passed to the
crs attribute of st_transform or st_as_sf</p></dd>

</dl></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Stuart Brown, Nigel Willoughby.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

